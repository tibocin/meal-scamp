import{s as Ee,n as ne}from"./scheduler.DYjCt7Qj.js";import{S as Ce,i as De,d as g,a as X,b as G,c as u,e as D,f as k,g as N,h as Z,j as L,m as x,k as E,s as U,t as B,l as Y,v as oe,w as se,x as ce}from"./index.DJsOjTB_.js";import{e as q}from"./each.D6YF6ztN.js";import{p as le,m as re}from"./stores.D1Gm6O95.js";function ie(a,e,n){const t=a.slice();return t[13]=e[n][0],t[14]=e[n][1],t}function he(a,e,n){const t=a.slice();return t[17]=e[n][0],t[18]=e[n][1],t}function fe(a,e,n){const t=a.slice();return t[21]=e[n],t}function ue(a,e,n){const t=a.slice();return t[24]=e[n],t}function _e(a,e,n){const t=a.slice();return t[17]=e[n],t[28]=n,t}function de(a,e,n){const t=a.slice();return t[24]=e[n],t}function ve(a){let e,n=a[24].name+"",t,o,i;function s(){return a[9](a[24])}return{c(){e=E("button"),t=B(n),this.h()},l(d){e=k(d,"BUTTON",{class:!0});var h=N(e);t=x(h,n),h.forEach(g),this.h()},h(){D(e,"class","btn-outline")},m(d,h){G(d,e,h),u(e,t),o||(i=oe(e,"click",s),o=!0)},p(d,h){a=d,h&1&&n!==(n=a[24].name+"")&&Y(t,n)},d(d){d&&g(e),o=!1,i()}}}function Ie(a){let e,n=q(a[6](a[21])),t=[];for(let o=0;o<n.length;o+=1)t[o]=pe(_e(a,n,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=ce()},l(o){for(let i=0;i<t.length;i+=1)t[i].l(o);e=ce()},m(o,i){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(o,i);G(o,e,i)},p(o,i){if(i&232){n=q(o[6](o[21]));let s;for(s=0;s<n.length;s+=1){const d=_e(o,n,s);t[s]?t[s].p(d,i):(t[s]=pe(d),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(o){o&&g(e),X(t,o)}}}function Oe(a){let e,n="No meals yet";return{c(){e=E("span"),e.textContent=n,this.h()},l(t){e=k(t,"SPAN",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-e35gwc"&&(e.textContent=n),this.h()},h(){D(e,"class","tag")},m(t,o){G(t,e,o)},p:ne,d(t){t&&g(e)}}}function pe(a){let e,n=a[7](a[17])+"",t,o,i,s;function d(){return a[10](a[21],a[28])}return{c(){e=E("button"),t=B(n),o=B(" ✕"),this.h()},l(h){e=k(h,"BUTTON",{class:!0});var f=N(e);t=x(f,n),o=x(f," ✕"),f.forEach(g),this.h()},h(){D(e,"class","tag")},m(h,f){G(h,e,f),u(e,t),u(e,o),i||(s=oe(e,"click",d),i=!0)},p(h,f){a=h},d(h){h&&g(e),i=!1,s()}}}function me(a){let e,n=a[24].name+"",t,o;return{c(){e=E("option"),t=B(n),this.h()},l(i){e=k(i,"OPTION",{});var s=N(e);t=x(s,n),s.forEach(g),this.h()},h(){e.__value=o=a[24].id,se(e,e.__value)},m(i,s){G(i,e,s),u(e,t)},p(i,s){s&1&&n!==(n=i[24].name+"")&&Y(t,n),s&1&&o!==(o=i[24].id)&&(e.__value=o,se(e,e.__value))},d(i){i&&g(e)}}}function ge(a){let e,n,t=a[21]+"",o,i,s,d,h,f,_,I="+ Add meal",S,M,J;function Q(v,V){return v[6](v[21]).length===0?Oe:Ie}let p=Q(a)(a),m=q(a[0]),b=[];for(let v=0;v<m.length;v+=1)b[v]=me(ue(a,m,v));function F(...v){return a[11](a[21],...v)}return{c(){e=E("div"),n=E("div"),o=B(t),i=U(),s=E("div"),p.c(),d=U(),h=E("div"),f=E("select"),_=E("option"),_.textContent=I;for(let v=0;v<b.length;v+=1)b[v].c();S=U(),this.h()},l(v){e=k(v,"DIV",{class:!0});var V=N(e);n=k(V,"DIV",{class:!0});var C=N(n);o=x(C,t),C.forEach(g),i=L(V),s=k(V,"DIV",{class:!0});var H=N(s);p.l(H),H.forEach(g),d=L(V),h=k(V,"DIV",{class:!0});var P=N(h);f=k(P,"SELECT",{class:!0});var z=N(f);_=k(z,"OPTION",{"data-svelte-h":!0}),Z(_)!=="svelte-1uktmxh"&&(_.textContent=I);for(let O=0;O<b.length;O+=1)b[O].l(z);z.forEach(g),P.forEach(g),S=L(V),V.forEach(g),this.h()},h(){D(n,"class","text-sm text-gray-500"),D(s,"class","flex flex-wrap gap-2 mt-1"),_.__value="",se(_,_.__value),D(f,"class","border p-1"),D(h,"class","mt-2"),D(e,"class","mb-3")},m(v,V){G(v,e,V),u(e,n),u(n,o),u(e,i),u(e,s),p.m(s,null),u(e,d),u(e,h),u(h,f),u(f,_);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(f,null);u(e,S),M||(J=oe(f,"change",F),M=!0)},p(v,V){if(a=v,p.p(a,V),V&1){m=q(a[0]);let C;for(C=0;C<m.length;C+=1){const H=ue(a,m,C);b[C]?b[C].p(H,V):(b[C]=me(H),b[C].c(),b[C].m(f,null))}for(;C<b.length;C+=1)b[C].d(1);b.length=m.length}},d(v){v&&g(e),p.d(),X(b,v),M=!1,J()}}}function be(a){let e,n,t=a[7](a[17])+"",o,i,s,d=a[18]+"",h,f;return{c(){e=E("div"),n=E("span"),o=B(t),i=U(),s=E("span"),h=B(d),f=B("×"),this.h()},l(_){e=k(_,"DIV",{class:!0});var I=N(e);n=k(I,"SPAN",{});var S=N(n);o=x(S,t),S.forEach(g),i=L(I),s=k(I,"SPAN",{class:!0});var M=N(s);h=x(M,d),f=x(M,"×"),M.forEach(g),I.forEach(g),this.h()},h(){D(s,"class","font-mono"),D(e,"class","flex justify-between border-b py-1 text-sm")},m(_,I){G(_,e,I),u(e,n),u(n,o),u(e,i),u(e,s),u(s,h),u(s,f)},p(_,I){I&4&&t!==(t=_[7](_[17])+"")&&Y(o,t),I&4&&d!==(d=_[18]+"")&&Y(h,d)},d(_){_&&g(e)}}}function ke(a){let e,n,t=a[13]+"",o,i,s=a[14]+"",d,h;return{c(){e=E("div"),n=E("span"),o=B(t),i=E("span"),d=B(s),h=U(),this.h()},l(f){e=k(f,"DIV",{class:!0});var _=N(e);n=k(_,"SPAN",{});var I=N(n);o=x(I,t),I.forEach(g),i=k(_,"SPAN",{class:!0});var S=N(i);d=x(S,s),S.forEach(g),h=L(_),_.forEach(g),this.h()},h(){D(i,"class","font-mono"),D(e,"class","flex justify-between border-b py-1 text-sm")},m(f,_){G(f,e,_),u(e,n),u(n,o),u(e,i),u(i,d),u(e,h)},p(f,_){_&2&&t!==(t=f[13]+"")&&Y(o,t),_&2&&s!==(s=f[14]+"")&&Y(d,s)},d(f){f&&g(e)}}}function Ne(a){let e,n,t,o="Add Meals to Days",i,s,d,h,f,_,I,S,M,J,Q,r,p,m="Batch Prep Counts",b,F,v,V="Shopping List (aggregated)",C,H=q(a[0]),P=[];for(let c=0;c<H.length;c+=1)P[c]=ve(de(a,H,c));let z=q(a[3]()),O=[];for(let c=0;c<z.length;c+=1)O[c]=ge(fe(a,z,c));let R=q(Object.entries(a[2])),j=[];for(let c=0;c<R.length;c+=1)j[c]=be(he(a,R,c));let W=q(Object.entries(a[1])),y=[];for(let c=0;c<W.length;c+=1)y[c]=ke(ie(a,W,c));return{c(){e=E("div"),n=E("div"),t=E("h3"),t.textContent=o,i=U(),s=E("div");for(let c=0;c<P.length;c+=1)P[c].c();d=U(),h=E("div"),f=E("div"),_=E("h3"),I=B("Plan ("),S=B(ae),M=B(" days)"),J=U();for(let c=0;c<O.length;c+=1)O[c].c();Q=U(),r=E("div"),p=E("h3"),p.textContent=m,b=U();for(let c=0;c<j.length;c+=1)j[c].c();F=U(),v=E("h3"),v.textContent=V,C=U();for(let c=0;c<y.length;c+=1)y[c].c();this.h()},l(c){e=k(c,"DIV",{class:!0});var w=N(e);n=k(w,"DIV",{class:!0});var l=N(n);t=k(l,"H3",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-shm20h"&&(t.textContent=o),i=L(l),s=k(l,"DIV",{class:!0});var T=N(s);for(let A=0;A<P.length;A+=1)P[A].l(T);T.forEach(g),l.forEach(g),d=L(w),h=k(w,"DIV",{class:!0});var $=N(h);f=k($,"DIV",{class:!0});var ee=N(f);_=k(ee,"H3",{class:!0});var te=N(_);I=x(te,"Plan ("),S=x(te,ae),M=x(te," days)"),te.forEach(g),J=L(ee);for(let A=0;A<O.length;A+=1)O[A].l(ee);ee.forEach(g),Q=L($),r=k($,"DIV",{class:!0});var K=N(r);p=k(K,"H3",{class:!0,"data-svelte-h":!0}),Z(p)!=="svelte-1hur4qz"&&(p.textContent=m),b=L(K);for(let A=0;A<j.length;A+=1)j[A].l(K);F=L(K),v=k(K,"H3",{class:!0,"data-svelte-h":!0}),Z(v)!=="svelte-1s63wpa"&&(v.textContent=V),C=L(K);for(let A=0;A<y.length;A+=1)y[A].l(K);K.forEach(g),$.forEach(g),w.forEach(g),this.h()},h(){D(t,"class","font-semibold mb-2"),D(s,"class","flex gap-2 flex-wrap"),D(n,"class","card"),D(_,"class","font-semibold mb-2"),D(f,"class","card"),D(p,"class","font-semibold mb-2"),D(v,"class","font-semibold mt-4 mb-2"),D(r,"class","card"),D(h,"class","grid md:grid-cols-2 gap-4"),D(e,"class","space-y-4")},m(c,w){G(c,e,w),u(e,n),u(n,t),u(n,i),u(n,s);for(let l=0;l<P.length;l+=1)P[l]&&P[l].m(s,null);u(e,d),u(e,h),u(h,f),u(f,_),u(_,I),u(_,S),u(_,M),u(f,J);for(let l=0;l<O.length;l+=1)O[l]&&O[l].m(f,null);u(h,Q),u(h,r),u(r,p),u(r,b);for(let l=0;l<j.length;l+=1)j[l]&&j[l].m(r,null);u(r,F),u(r,v),u(r,C);for(let l=0;l<y.length;l+=1)y[l]&&y[l].m(r,null)},p(c,[w]){if(w&25){H=q(c[0]);let l;for(l=0;l<H.length;l+=1){const T=de(c,H,l);P[l]?P[l].p(T,w):(P[l]=ve(T),P[l].c(),P[l].m(s,null))}for(;l<P.length;l+=1)P[l].d(1);P.length=H.length}if(w&249){z=q(c[3]());let l;for(l=0;l<z.length;l+=1){const T=fe(c,z,l);O[l]?O[l].p(T,w):(O[l]=ge(T),O[l].c(),O[l].m(f,null))}for(;l<O.length;l+=1)O[l].d(1);O.length=z.length}if(w&132){R=q(Object.entries(c[2]));let l;for(l=0;l<R.length;l+=1){const T=he(c,R,l);j[l]?j[l].p(T,w):(j[l]=be(T),j[l].c(),j[l].m(r,F))}for(;l<j.length;l+=1)j[l].d(1);j.length=R.length}if(w&2){W=q(Object.entries(c[1]));let l;for(l=0;l<W.length;l+=1){const T=ie(c,W,l);y[l]?y[l].p(T,w):(y[l]=ke(T),y[l].c(),y[l].m(r,null))}for(;l<y.length;l+=1)y[l].d(1);y.length=W.length}},i:ne,o:ne,d(c){c&&g(e),X(P,c),X(O,c),X(j,c),X(y,c)}}}const ae=7;function Pe(a,e,n){let t,o,i=new Date,s={};le.subscribe(r=>n(8,s=r));function d(){const r=[],p=new Date(i);for(let m=0;m<ae;m++){const b=new Date(p);b.setDate(p.getDate()+m),r.push(b.toISOString().slice(0,10))}return r}let h=[];re.subscribe(r=>n(0,h=r)),h.length===0&&fetch("/api/seed").then(r=>r.json()).then(r=>re.set(r));function f(r,p){const m=structuredClone(s);m[r]=m[r]||[],m[r].push(p),le.set(m)}function _(r,p){const m=structuredClone(s);m[r].splice(p,1),le.set(m)}function I(r){return s[r]||[]}function S(r){const p=h.find(m=>m.id===r);return p?p.name:r}const M=r=>f(d()[0],r.id),J=(r,p)=>_(r,p),Q=(r,p)=>f(r,p.target.value);return a.$$.update=()=>{a.$$.dirty&256&&n(2,t=(()=>{const r={};return Object.values(s).forEach(p=>p.forEach(m=>{r[m]=(r[m]||0)+1})),r})()),a.$$.dirty&257&&n(1,o=(()=>{const r={},p=Object.fromEntries(h.map(m=>[m.id,m]));for(const m of Object.values(s))for(const b of m){const F=p[b];if(F)for(const v of F.ingredients)r[v.name]=(r[v.name]||0)+(v.amount||0)}return r})())},[h,o,t,d,f,_,I,S,s,M,J,Q]}class we extends Ce{constructor(e){super(),De(this,e,Pe,Ne,Ee,{})}}export{we as P};
